{"ast":null,"code":"import axios from \"axios\";\nimport * as actionType from \"./actionTypes\";\n\nconst loginRequest = () => ({\n  type: actionType.LOGIN_REQUEST\n});\n\nconst loginSuccess = () => ({\n  type: actionType.LOGIN_SUCCESS\n});\n\nconst loginFailed = data => ({\n  type: actionType.LOGIN_FAILURE,\n  payload: data\n});\n\nexport const login = (email, password, history) => {\n  return async dispatch => {\n    dispatch(loginFailed(\"\"));\n    dispatch(loginRequest());\n    axios.post(\"api/auth/login\", {\n      email,\n      password\n    }).then(res => {\n      dispatch(loginSuccess());\n      console.log(res.data.body.user);\n      localStorage.setItem(\"user\", JSON.stringify(res.data.body.user));\n      localStorage.setItem(\"authToken\", JSON.stringify(res.data.body.token)); // console.log(res);\n\n      history.push(\"dashboard\");\n    }).catch(err => {\n      console.log(err.response);\n      dispatch(loginFailed(err.response.data.message)); // console.log();\n    });\n  };\n};\nexport const getUser = () => {\n  // console.log(localStorage.getItem(\"authToken\"))\n  if (typeof window == \"undefined\") {\n    return false;\n  }\n\n  if (localStorage.getItem(\"user\")) {\n    return JSON.parse(localStorage.getItem(\"user\"));\n  } else {\n    return false;\n  }\n};\nexport const logOut = () => {\n  localStorage.clear();\n};","map":{"version":3,"sources":["/home/cqlnode/Documents/ADMIn/src/store/auth/actions.js"],"names":["axios","actionType","loginRequest","type","LOGIN_REQUEST","loginSuccess","LOGIN_SUCCESS","loginFailed","data","LOGIN_FAILURE","payload","login","email","password","history","dispatch","post","then","res","console","log","body","user","localStorage","setItem","JSON","stringify","token","push","catch","err","response","message","getUser","window","getItem","parse","logOut","clear"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,UAAZ,MAA4B,eAA5B;;AAEA,MAAMC,YAAY,GAAG,OAAO;AAC1BC,EAAAA,IAAI,EAAEF,UAAU,CAACG;AADS,CAAP,CAArB;;AAIA,MAAMC,YAAY,GAAG,OAAO;AAC1BF,EAAAA,IAAI,EAAEF,UAAU,CAACK;AADS,CAAP,CAArB;;AAIA,MAAMC,WAAW,GAAIC,IAAD,KAAW;AAC7BL,EAAAA,IAAI,EAAEF,UAAU,CAACQ,aADY;AAE7BC,EAAAA,OAAO,EAAEF;AAFoB,CAAX,CAApB;;AAKA,OAAO,MAAMG,KAAK,GAAG,CAACC,KAAD,EAAQC,QAAR,EAAkBC,OAAlB,KAA8B;AACjD,SAAO,MAAOC,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAACR,WAAW,CAAC,EAAD,CAAZ,CAAR;AAEAQ,IAAAA,QAAQ,CAACb,YAAY,EAAb,CAAR;AACAF,IAAAA,KAAK,CACFgB,IADH,CACQ,gBADR,EAC0B;AAAEJ,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAD1B,EAEGI,IAFH,CAESC,GAAD,IAAS;AACbH,MAAAA,QAAQ,CAACV,YAAY,EAAb,CAAR;AACAc,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACV,IAAJ,CAASa,IAAT,CAAcC,IAA1B;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeR,GAAG,CAACV,IAAJ,CAASa,IAAT,CAAcC,IAA7B,CAA7B;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeR,GAAG,CAACV,IAAJ,CAASa,IAAT,CAAcM,KAA7B,CAAlC,EAJa,CAKb;;AACAb,MAAAA,OAAO,CAACc,IAAR,CAAa,WAAb;AACD,KATH,EAUGC,KAVH,CAUUC,GAAD,IAAS;AACdX,MAAAA,OAAO,CAACC,GAAR,CAAYU,GAAG,CAACC,QAAhB;AACAhB,MAAAA,QAAQ,CAACR,WAAW,CAACuB,GAAG,CAACC,QAAJ,CAAavB,IAAb,CAAkBwB,OAAnB,CAAZ,CAAR,CAFc,CAGd;AACD,KAdH;AAeD,GAnBD;AAoBD,CArBM;AAuBP,OAAO,MAAMC,OAAO,GAAG,MAAM;AAC3B;AACA,MAAI,OAAOC,MAAP,IAAiB,WAArB,EAAkC;AAChC,WAAO,KAAP;AACD;;AAED,MAAIX,YAAY,CAACY,OAAb,CAAqB,MAArB,CAAJ,EAAkC;AAChC,WAAOV,IAAI,CAACW,KAAL,CAAWb,YAAY,CAACY,OAAb,CAAqB,MAArB,CAAX,CAAP;AACD,GAFD,MAEO;AACL,WAAO,KAAP;AACD;AACF,CAXM;AAaP,OAAO,MAAME,MAAM,GAAG,MAAM;AAC1Bd,EAAAA,YAAY,CAACe,KAAb;AACD,CAFM","sourcesContent":["import axios from \"axios\";\nimport * as actionType from \"./actionTypes\";\n\nconst loginRequest = () => ({\n  type: actionType.LOGIN_REQUEST,\n});\n\nconst loginSuccess = () => ({\n  type: actionType.LOGIN_SUCCESS,\n});\n\nconst loginFailed = (data) => ({\n  type: actionType.LOGIN_FAILURE,\n  payload: data,\n});\n\nexport const login = (email, password, history) => {\n  return async (dispatch) => {\n    dispatch(loginFailed(\"\"));\n\n    dispatch(loginRequest());\n    axios\n      .post(\"api/auth/login\", { email, password })\n      .then((res) => {\n        dispatch(loginSuccess());\n        console.log(res.data.body.user);\n        localStorage.setItem(\"user\", JSON.stringify(res.data.body.user));\n        localStorage.setItem(\"authToken\", JSON.stringify(res.data.body.token));\n        // console.log(res);\n        history.push(\"dashboard\");\n      })\n      .catch((err) => {\n        console.log(err.response);\n        dispatch(loginFailed(err.response.data.message));\n        // console.log();\n      });\n  };\n};\n\nexport const getUser = () => {\n  // console.log(localStorage.getItem(\"authToken\"))\n  if (typeof window == \"undefined\") {\n    return false;\n  }\n\n  if (localStorage.getItem(\"user\")) {\n    return JSON.parse(localStorage.getItem(\"user\"));\n  } else {\n    return false;\n  }\n};\n\nexport const logOut = () => {\n  localStorage.clear();\n};\n"]},"metadata":{},"sourceType":"module"}